<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>06_模板解析_一般指令</title>
  <script src="./js/mvvm.js"></script>
  <script src="./js/compile.js"></script>
  <script src="./js/observer.js"></script>
  <script src="./js/watcher.js"></script>
</head>

<body>
  <div id="app">
    <input type="text" v-model="msg" >
    <p>{{msg}}</p>
  </div>
  <script type="text/javascript">
    const vm = new MVVM({
      el: '#app',
      data: {
        msg:'哈哈'
      },

    })


    /*
    面试题:谈谈数据的双向绑定的裂解

     Vue中有模版解析中有双向数据绑定的解析
     在Vue实例的时候,内部会创建模版解析对象,用来进行模版解析的操作,首先把选择器和当前的vm实例对象传入到解析对象中,内部会先创建文档碎片对象(虚拟DOM),根据选择器获取对应的html容器(id为app的div),把该容器中的所有的节点全部的放在文档碎片对象中,内部遍历文档碎片对象中所有的节点,判断该节点是不是标签,是不是文本,如果不是标签,也不是文本,再判断该节点是不是有子节点,那么就进行递归操作,直到该节点是标签或者该节点是文本节点并且是和插值正则表达式匹配的
    如果是标签,要获取该标签上所有的属性,判断每个属性是不是指令，如果这个属性是指令,判断该指令是不是事件指令或者是不是普通指令,v-model属于普通指令,通过updater对象中对应的方法,根据vm来获取msg表达式的值,把这个值给当前的input标签的value属性
    紧接着,通过addEventListener为当前的input标签绑定是input事件及对应的回调函数



    dep如何通知watcher

    当在页面中做相关的操作的时候,如果更改了页面(更改了数据-->data对象中的属性值),此时等于是在重新设置data对象中对应的某个属性值,那么就会进入到MVVM中的set方法,就会进入到Observer的set方法中,此时这个属性对应的dep会调用notify()方法通知当前的这个dep对应的所有的watcher对象,进行数据的更新,重新进行模版的解析,重新渲染界面,至此这就是所谓的dep和watcher真正的关系所要做的事情
    
    */

   
  </script>
</body>

</html>